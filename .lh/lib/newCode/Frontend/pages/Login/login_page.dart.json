{
    "sourceFile": "lib/newCode/Frontend/pages/Login/login_page.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1756115121589,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1756115249506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import 'package:l_f/Frontend/pages/home_screen.dart';\n import 'package:l_f/Frontend/pages/reset_password_page.dart';\n import 'package:l_f/Frontend/pages/signup_page.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n class LoginPage extends StatefulWidget {\n   const LoginPage({super.key});\n \n"
                },
                {
                    "date": 1756115256102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import 'package:l_f/Frontend/pages/home_screen.dart';\n import 'package:l_f/Frontend/pages/reset_password_page.dart';\n import 'package:l_f/Frontend/pages/signup_page.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n class LoginPage extends StatefulWidget {\n   const LoginPage({super.key});\n"
                },
                {
                    "date": 1756115261775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n import 'package:l_f/Frontend/pages/home_screen.dart';\n import 'package:l_f/Frontend/pages/reset_password_page.dart';\n import 'package:l_f/Frontend/pages/signup_page.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n class LoginPage extends StatefulWidget {\n"
                },
                {
                    "date": 1756115268418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n // lib/Frontend/pages/login_page.dart\n import 'package:flutter/material.dart';\n import 'package:l_f/Backend/auth_service.dart';\n import 'package:l_f/Backend/validator.dart';\n+import 'package:l_f/Frontend/Top/home_screen.dart';\n import 'package:l_f/Frontend/components/custom_text_field.dart';\n import 'package:l_f/Frontend/pages/home_screen.dart';\n import 'package:l_f/Frontend/pages/reset_password_page.dart';\n import 'package:l_f/Frontend/pages/signup_page.dart';\n"
                },
                {
                    "date": 1756115273856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,9 @@\n import 'package:l_f/Frontend/pages/home_screen.dart';\n import 'package:l_f/Frontend/pages/reset_password_page.dart';\n import 'package:l_f/Frontend/pages/signup_page.dart';\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/newCode/Backend/validator.dart';\n import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n"
                },
                {
                    "date": 1756115386656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,14 +1,9 @@\n // lib/Frontend/pages/login_page.dart\n import 'package:flutter/material.dart';\n-import 'package:l_f/Backend/auth_service.dart';\n-import 'package:l_f/Backend/validator.dart';\n-import 'package:l_f/Frontend/Top/home_screen.dart';\n-import 'package:l_f/Frontend/components/custom_text_field.dart';\n-import 'package:l_f/Frontend/pages/home_screen.dart';\n-import 'package:l_f/Frontend/pages/reset_password_page.dart';\n-import 'package:l_f/Frontend/pages/signup_page.dart';\n+\n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/newCode/Backend/auth_service.dart';\n import 'package:l_f/newCode/Backend/validator.dart';\n import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n"
                },
                {
                    "date": 1756115392105,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n // lib/Frontend/pages/login_page.dart\n import 'package:flutter/material.dart';\n \n import 'package:firebase_auth/firebase_auth.dart';\n+import 'package:l_f/Frontend/Top/home_screen.dart';\n import 'package:l_f/newCode/Backend/auth_service.dart';\n import 'package:l_f/newCode/Backend/validator.dart';\n import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n"
                },
                {
                    "date": 1756118735372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n // lib/Frontend/pages/login_page.dart\n+import 'package:firebase_auth/firebase_auth.dart';\n import 'package:flutter/material.dart';\n-\n-import 'package:firebase_auth/firebase_auth.dart';\n import 'package:l_f/Frontend/Top/home_screen.dart';\n import 'package:l_f/newCode/Backend/auth_service.dart';\n import 'package:l_f/newCode/Backend/validator.dart';\n import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n"
                },
                {
                    "date": 1756119176694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import 'package:l_f/Frontend/Top/home_screen.dart';\n import 'package:l_f/newCode/Backend/auth_service.dart';\n import 'package:l_f/newCode/Backend/validator.dart';\n import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n+import 'package:l_f/newCode/Frontend/pages/HomeScreen/home_screen.dart';\n import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n class LoginPage extends StatefulWidget {\n@@ -29,9 +30,10 @@\n       _isLoading = true;\n       _errorMessage = null;\n     });\n \n-    if (!Validator.isValidCollegeEmail(_emailController.text, _expectedDomain)) {\n+    if (!Validator.isValidCollegeEmail(\n+        _emailController.text, _expectedDomain)) {\n       setState(() {\n         _errorMessage = 'Please log in with your college email address.';\n         _isLoading = false;\n       });\n@@ -48,9 +50,10 @@\n         if (!user.emailVerified) {\n           _authService.sendEmailVerification();\n           await _authService.signOut();\n           setState(() {\n-            _errorMessage = 'Email not verified. A new verification link has been sent.';\n+            _errorMessage =\n+                'Email not verified. A new verification link has been sent.';\n           });\n         } else {\n           bool userExists = await _authService.doesUserExist(user.uid);\n           if (userExists) {\n@@ -132,17 +135,20 @@\n                       controller: _emailController,\n                       label: 'Email',\n                       icon: Icons.email,\n                       keyboardType: TextInputType.emailAddress,\n-                      validator: (value) => value!.isEmpty ? 'Please enter your email' : null,\n+                      validator: (value) =>\n+                          value!.isEmpty ? 'Please enter your email' : null,\n                     ),\n                     const SizedBox(height: 16),\n                     CustomTextField(\n                       controller: _passwordController,\n                       label: 'Password',\n                       icon: Icons.lock,\n                       obscureText: true,\n-                      validator: (value) => value!.isEmpty || value.length < 6 ? 'Password must be at least 6 characters' : null,\n+                      validator: (value) => value!.isEmpty || value.length < 6\n+                          ? 'Password must be at least 6 characters'\n+                          : null,\n                     ),\n                     const SizedBox(height: 16),\n                     if (_errorMessage != null)\n                       Text(\n@@ -161,9 +167,10 @@\n                     TextButton(\n                       onPressed: () {\n                         Navigator.push(\n                           context,\n-                          MaterialPageRoute(builder: (_) => const ResetPasswordPage()),\n+                          MaterialPageRoute(\n+                              builder: (_) => const ResetPasswordPage()),\n                         );\n                       },\n                       child: const Text(\n                         'Forgot Password?',\n"
                },
                {
                    "date": 1756122994017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,207 +1,206 @@\n-// lib/Frontend/pages/login_page.dart\n-import 'package:firebase_auth/firebase_auth.dart';\n-import 'package:flutter/material.dart';\n-import 'package:l_f/Frontend/Top/home_screen.dart';\n-import 'package:l_f/newCode/Backend/auth_service.dart';\n-import 'package:l_f/newCode/Backend/validator.dart';\n-import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n-import 'package:l_f/newCode/Frontend/pages/HomeScreen/home_screen.dart';\n-import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n-import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n+// // lib/Frontend/pages/login_page.dart\n+// import 'package:firebase_auth/firebase_auth.dart';\n+// import 'package:flutter/material.dart';\n+// import 'package:l_f/newCode/Backend/auth_service.dart';\n+// import 'package:l_f/newCode/Backend/validator.dart';\n+// import 'package:l_f/newCode/Frontend/components/custom_text_field.dart';\n+// import 'package:l_f/newCode/Frontend/pages/HomeScreen/home_screen.dart';\n+// import 'package:l_f/newCode/Frontend/pages/resetPassword/reset_password_page.dart';\n+// import 'package:l_f/newCode/Frontend/pages/signup/signup_page.dart';\n \n-class LoginPage extends StatefulWidget {\n-  const LoginPage({super.key});\n+// class LoginPage extends StatefulWidget {\n+//   const LoginPage({super.key});\n \n-  @override\n-  _LoginPageState createState() => _LoginPageState();\n-}\n+//   @override\n+//   _LoginPageState createState() => _LoginPageState();\n+// }\n \n-class _LoginPageState extends State<LoginPage> {\n-  final _emailController = TextEditingController();\n-  final _passwordController = TextEditingController();\n-  final AuthService _authService = AuthService();\n+// class _LoginPageState extends State<LoginPage> {\n+//   final _emailController = TextEditingController();\n+//   final _passwordController = TextEditingController();\n+//   final AuthService _authService = AuthService();\n \n-  bool _isLoading = false;\n-  String? _errorMessage;\n-  final String _expectedDomain = '@nith.ac.in';\n+//   bool _isLoading = false;\n+//   String? _errorMessage;\n+//   final String _expectedDomain = '@nith.ac.in';\n \n-  Future<void> _login() async {\n-    setState(() {\n-      _isLoading = true;\n-      _errorMessage = null;\n-    });\n+//   Future<void> _login() async {\n+//     setState(() {\n+//       _isLoading = true;\n+//       _errorMessage = null;\n+//     });\n \n-    if (!Validator.isValidCollegeEmail(\n-        _emailController.text, _expectedDomain)) {\n-      setState(() {\n-        _errorMessage = 'Please log in with your college email address.';\n-        _isLoading = false;\n-      });\n-      return;\n-    }\n+//     if (!Validator.isValidCollegeEmail(\n+//         _emailController.text, _expectedDomain)) {\n+//       setState(() {\n+//         _errorMessage = 'Please log in with your college email address.';\n+//         _isLoading = false;\n+//       });\n+//       return;\n+//     }\n \n-    try {\n-      User? user = await _authService.signInWithEmailAndPassword(\n-        _emailController.text,\n-        _passwordController.text,\n-      );\n+//     try {\n+//       User? user = await _authService.signInWithEmailAndPassword(\n+//         _emailController.text,\n+//         _passwordController.text,\n+//       );\n \n-      if (user != null) {\n-        if (!user.emailVerified) {\n-          _authService.sendEmailVerification();\n-          await _authService.signOut();\n-          setState(() {\n-            _errorMessage =\n-                'Email not verified. A new verification link has been sent.';\n-          });\n-        } else {\n-          bool userExists = await _authService.doesUserExist(user.uid);\n-          if (userExists) {\n-            Navigator.pushReplacement(\n-              context,\n-              MaterialPageRoute(builder: (_) => const HomePage()),\n-            );\n-          } else {\n-            await _authService.signOut();\n-            setState(() {\n-              _errorMessage = 'User data not found. Please contact support.';\n-            });\n-          }\n-        }\n-      }\n-    } on FirebaseAuthException catch (e) {\n-      setState(() {\n-        _errorMessage = _mapFirebaseAuthException(e.code);\n-      });\n-    } catch (e) {\n-      setState(() {\n-        _errorMessage = 'An unexpected error occurred. Please try again.';\n-      });\n-    } finally {\n-      setState(() {\n-        _isLoading = false;\n-      });\n-    }\n-  }\n+//       if (user != null) {\n+//         if (!user.emailVerified) {\n+//           _authService.sendEmailVerification();\n+//           await _authService.signOut();\n+//           setState(() {\n+//             _errorMessage =\n+//                 'Email not verified. A new verification link has been sent.';\n+//           });\n+//         } else {\n+//           bool userExists = await _authService.doesUserExist(user.uid);\n+//           if (userExists) {\n+//             Navigator.pushReplacement(\n+//               context,\n+//               MaterialPageRoute(builder: (_) => const HomePage()),\n+//             );\n+//           } else {\n+//             await _authService.signOut();\n+//             setState(() {\n+//               _errorMessage = 'User data not found. Please contact support.';\n+//             });\n+//           }\n+//         }\n+//       }\n+//     } on FirebaseAuthException catch (e) {\n+//       setState(() {\n+//         _errorMessage = _mapFirebaseAuthException(e.code);\n+//       });\n+//     } catch (e) {\n+//       setState(() {\n+//         _errorMessage = 'An unexpected error occurred. Please try again.';\n+//       });\n+//     } finally {\n+//       setState(() {\n+//         _isLoading = false;\n+//       });\n+//     }\n+//   }\n \n-  String _mapFirebaseAuthException(String code) {\n-    switch (code) {\n-      case 'user-not-found':\n-        return 'No user found for that email.';\n-      case 'wrong-password':\n-        return 'Wrong password provided.';\n-      default:\n-        return 'Failed to log in. Please try again.';\n-    }\n-  }\n+//   String _mapFirebaseAuthException(String code) {\n+//     switch (code) {\n+//       case 'user-not-found':\n+//         return 'No user found for that email.';\n+//       case 'wrong-password':\n+//         return 'Wrong password provided.';\n+//       default:\n+//         return 'Failed to log in. Please try again.';\n+//     }\n+//   }\n \n-  @override\n-  Widget build(BuildContext context) {\n-    bool isMobile = MediaQuery.of(context).size.width < 630;\n-    Size size = MediaQuery.of(context).size;\n-    return Scaffold(\n-      body: Center(\n-        child: SingleChildScrollView(\n-          padding: const EdgeInsets.all(16.0),\n-          child: Column(\n-            mainAxisAlignment: MainAxisAlignment.center,\n-            children: [\n-              const SizedBox(height: 16),\n-              const Text(\n-                'Welcome Back!',\n-                style: TextStyle(\n-                  fontSize: 32,\n-                  fontWeight: FontWeight.bold,\n-                ),\n-              ),\n-              const SizedBox(height: 32),\n-              Container(\n-                width: isMobile ? size.width * 0.8 : size.width * 0.5,\n-                decoration: BoxDecoration(\n-                  color: Colors.white.withOpacity(0.1),\n-                  borderRadius: BorderRadius.circular(12),\n-                  boxShadow: [\n-                    BoxShadow(\n-                      color: Colors.black.withOpacity(0.1),\n-                      blurRadius: 10,\n-                      offset: const Offset(0, 4),\n-                    ),\n-                  ],\n-                ),\n-                padding: const EdgeInsets.all(16.0),\n-                child: Column(\n-                  children: [\n-                    CustomTextField(\n-                      controller: _emailController,\n-                      label: 'Email',\n-                      icon: Icons.email,\n-                      keyboardType: TextInputType.emailAddress,\n-                      validator: (value) =>\n-                          value!.isEmpty ? 'Please enter your email' : null,\n-                    ),\n-                    const SizedBox(height: 16),\n-                    CustomTextField(\n-                      controller: _passwordController,\n-                      label: 'Password',\n-                      icon: Icons.lock,\n-                      obscureText: true,\n-                      validator: (value) => value!.isEmpty || value.length < 6\n-                          ? 'Password must be at least 6 characters'\n-                          : null,\n-                    ),\n-                    const SizedBox(height: 16),\n-                    if (_errorMessage != null)\n-                      Text(\n-                        _errorMessage!,\n-                        style: const TextStyle(color: Colors.red, fontSize: 16),\n-                        textAlign: TextAlign.center,\n-                      ),\n-                    const SizedBox(height: 16),\n-                    _isLoading\n-                        ? const CircularProgressIndicator()\n-                        : ElevatedButton(\n-                            onPressed: _login,\n-                            child: const Text('Login'),\n-                          ),\n-                    const SizedBox(height: 16),\n-                    TextButton(\n-                      onPressed: () {\n-                        Navigator.push(\n-                          context,\n-                          MaterialPageRoute(\n-                              builder: (_) => const ResetPasswordPage()),\n-                        );\n-                      },\n-                      child: const Text(\n-                        'Forgot Password?',\n-                        style: TextStyle(\n-                          decoration: TextDecoration.underline,\n-                          fontWeight: FontWeight.bold,\n-                        ),\n-                      ),\n-                    ),\n-                    TextButton(\n-                      onPressed: () {\n-                        Navigator.push(\n-                          context,\n-                          MaterialPageRoute(builder: (_) => const SignUpPage()),\n-                        );\n-                      },\n-                      child: const Text(\n-                        'Don\\'t have an account? Sign Up',\n-                        style: TextStyle(\n-                          decoration: TextDecoration.underline,\n-                          fontWeight: FontWeight.bold,\n-                        ),\n-                      ),\n-                    ),\n-                  ],\n-                ),\n-              ),\n-            ],\n-          ),\n-        ),\n-      ),\n-    );\n-  }\n-}\n+//   @override\n+//   Widget build(BuildContext context) {\n+//     bool isMobile = MediaQuery.of(context).size.width < 630;\n+//     Size size = MediaQuery.of(context).size;\n+//     return Scaffold(\n+//       body: Center(\n+//         child: SingleChildScrollView(\n+//           padding: const EdgeInsets.all(16.0),\n+//           child: Column(\n+//             mainAxisAlignment: MainAxisAlignment.center,\n+//             children: [\n+//               const SizedBox(height: 16),\n+//               const Text(\n+//                 'Welcome Back!',\n+//                 style: TextStyle(\n+//                   fontSize: 32,\n+//                   fontWeight: FontWeight.bold,\n+//                 ),\n+//               ),\n+//               const SizedBox(height: 32),\n+//               Container(\n+//                 width: isMobile ? size.width * 0.8 : size.width * 0.5,\n+//                 decoration: BoxDecoration(\n+//                   color: Colors.white.withOpacity(0.1),\n+//                   borderRadius: BorderRadius.circular(12),\n+//                   boxShadow: [\n+//                     BoxShadow(\n+//                       color: Colors.black.withOpacity(0.1),\n+//                       blurRadius: 10,\n+//                       offset: const Offset(0, 4),\n+//                     ),\n+//                   ],\n+//                 ),\n+//                 padding: const EdgeInsets.all(16.0),\n+//                 child: Column(\n+//                   children: [\n+//                     CustomTextField(\n+//                       controller: _emailController,\n+//                       label: 'Email',\n+//                       icon: Icons.email,\n+//                       keyboardType: TextInputType.emailAddress,\n+//                       validator: (value) =>\n+//                           value!.isEmpty ? 'Please enter your email' : null,\n+//                     ),\n+//                     const SizedBox(height: 16),\n+//                     CustomTextField(\n+//                       controller: _passwordController,\n+//                       label: 'Password',\n+//                       icon: Icons.lock,\n+//                       obscureText: true,\n+//                       validator: (value) => value!.isEmpty || value.length < 6\n+//                           ? 'Password must be at least 6 characters'\n+//                           : null,\n+//                     ),\n+//                     const SizedBox(height: 16),\n+//                     if (_errorMessage != null)\n+//                       Text(\n+//                         _errorMessage!,\n+//                         style: const TextStyle(color: Colors.red, fontSize: 16),\n+//                         textAlign: TextAlign.center,\n+//                       ),\n+//                     const SizedBox(height: 16),\n+//                     _isLoading\n+//                         ? const CircularProgressIndicator()\n+//                         : ElevatedButton(\n+//                             onPressed: _login,\n+//                             child: const Text('Login'),\n+//                           ),\n+//                     const SizedBox(height: 16),\n+//                     TextButton(\n+//                       onPressed: () {\n+//                         Navigator.push(\n+//                           context,\n+//                           MaterialPageRoute(\n+//                               builder: (_) => const ResetPasswordPage()),\n+//                         );\n+//                       },\n+//                       child: const Text(\n+//                         'Forgot Password?',\n+//                         style: TextStyle(\n+//                           decoration: TextDecoration.underline,\n+//                           fontWeight: FontWeight.bold,\n+//                         ),\n+//                       ),\n+//                     ),\n+//                     TextButton(\n+//                       onPressed: () {\n+//                         Navigator.push(\n+//                           context,\n+//                           MaterialPageRoute(builder: (_) => const SignUpPage()),\n+//                         );\n+//                       },\n+//                       child: const Text(\n+//                         'Don\\'t have an account? Sign Up',\n+//                         style: TextStyle(\n+//                           decoration: TextDecoration.underline,\n+//                           fontWeight: FontWeight.bold,\n+//                         ),\n+//                       ),\n+//                     ),\n+//                   ],\n+//                 ),\n+//               ),\n+//             ],\n+//           ),\n+//         ),\n+//       ),\n+//     );\n+//   }\n+// }\n"
                }
            ],
            "date": 1756115121589,
            "name": "Commit-0",
            "content": "// lib/Frontend/pages/login_page.dart\nimport 'package:flutter/material.dart';\nimport 'package:l_f/Backend/auth_service.dart';\nimport 'package:l_f/Backend/validator.dart';\nimport 'package:l_f/Frontend/components/custom_text_field.dart';\nimport 'package:l_f/Frontend/pages/home_screen.dart';\nimport 'package:l_f/Frontend/pages/reset_password_page.dart';\nimport 'package:l_f/Frontend/pages/signup_page.dart';\nimport 'package:firebase_auth/firebase_auth.dart';\n\nclass LoginPage extends StatefulWidget {\n  const LoginPage({super.key});\n\n  @override\n  _LoginPageState createState() => _LoginPageState();\n}\n\nclass _LoginPageState extends State<LoginPage> {\n  final _emailController = TextEditingController();\n  final _passwordController = TextEditingController();\n  final AuthService _authService = AuthService();\n\n  bool _isLoading = false;\n  String? _errorMessage;\n  final String _expectedDomain = '@nith.ac.in';\n\n  Future<void> _login() async {\n    setState(() {\n      _isLoading = true;\n      _errorMessage = null;\n    });\n\n    if (!Validator.isValidCollegeEmail(_emailController.text, _expectedDomain)) {\n      setState(() {\n        _errorMessage = 'Please log in with your college email address.';\n        _isLoading = false;\n      });\n      return;\n    }\n\n    try {\n      User? user = await _authService.signInWithEmailAndPassword(\n        _emailController.text,\n        _passwordController.text,\n      );\n\n      if (user != null) {\n        if (!user.emailVerified) {\n          _authService.sendEmailVerification();\n          await _authService.signOut();\n          setState(() {\n            _errorMessage = 'Email not verified. A new verification link has been sent.';\n          });\n        } else {\n          bool userExists = await _authService.doesUserExist(user.uid);\n          if (userExists) {\n            Navigator.pushReplacement(\n              context,\n              MaterialPageRoute(builder: (_) => const HomePage()),\n            );\n          } else {\n            await _authService.signOut();\n            setState(() {\n              _errorMessage = 'User data not found. Please contact support.';\n            });\n          }\n        }\n      }\n    } on FirebaseAuthException catch (e) {\n      setState(() {\n        _errorMessage = _mapFirebaseAuthException(e.code);\n      });\n    } catch (e) {\n      setState(() {\n        _errorMessage = 'An unexpected error occurred. Please try again.';\n      });\n    } finally {\n      setState(() {\n        _isLoading = false;\n      });\n    }\n  }\n\n  String _mapFirebaseAuthException(String code) {\n    switch (code) {\n      case 'user-not-found':\n        return 'No user found for that email.';\n      case 'wrong-password':\n        return 'Wrong password provided.';\n      default:\n        return 'Failed to log in. Please try again.';\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    bool isMobile = MediaQuery.of(context).size.width < 630;\n    Size size = MediaQuery.of(context).size;\n    return Scaffold(\n      body: Center(\n        child: SingleChildScrollView(\n          padding: const EdgeInsets.all(16.0),\n          child: Column(\n            mainAxisAlignment: MainAxisAlignment.center,\n            children: [\n              const SizedBox(height: 16),\n              const Text(\n                'Welcome Back!',\n                style: TextStyle(\n                  fontSize: 32,\n                  fontWeight: FontWeight.bold,\n                ),\n              ),\n              const SizedBox(height: 32),\n              Container(\n                width: isMobile ? size.width * 0.8 : size.width * 0.5,\n                decoration: BoxDecoration(\n                  color: Colors.white.withOpacity(0.1),\n                  borderRadius: BorderRadius.circular(12),\n                  boxShadow: [\n                    BoxShadow(\n                      color: Colors.black.withOpacity(0.1),\n                      blurRadius: 10,\n                      offset: const Offset(0, 4),\n                    ),\n                  ],\n                ),\n                padding: const EdgeInsets.all(16.0),\n                child: Column(\n                  children: [\n                    CustomTextField(\n                      controller: _emailController,\n                      label: 'Email',\n                      icon: Icons.email,\n                      keyboardType: TextInputType.emailAddress,\n                      validator: (value) => value!.isEmpty ? 'Please enter your email' : null,\n                    ),\n                    const SizedBox(height: 16),\n                    CustomTextField(\n                      controller: _passwordController,\n                      label: 'Password',\n                      icon: Icons.lock,\n                      obscureText: true,\n                      validator: (value) => value!.isEmpty || value.length < 6 ? 'Password must be at least 6 characters' : null,\n                    ),\n                    const SizedBox(height: 16),\n                    if (_errorMessage != null)\n                      Text(\n                        _errorMessage!,\n                        style: const TextStyle(color: Colors.red, fontSize: 16),\n                        textAlign: TextAlign.center,\n                      ),\n                    const SizedBox(height: 16),\n                    _isLoading\n                        ? const CircularProgressIndicator()\n                        : ElevatedButton(\n                            onPressed: _login,\n                            child: const Text('Login'),\n                          ),\n                    const SizedBox(height: 16),\n                    TextButton(\n                      onPressed: () {\n                        Navigator.push(\n                          context,\n                          MaterialPageRoute(builder: (_) => const ResetPasswordPage()),\n                        );\n                      },\n                      child: const Text(\n                        'Forgot Password?',\n                        style: TextStyle(\n                          decoration: TextDecoration.underline,\n                          fontWeight: FontWeight.bold,\n                        ),\n                      ),\n                    ),\n                    TextButton(\n                      onPressed: () {\n                        Navigator.push(\n                          context,\n                          MaterialPageRoute(builder: (_) => const SignUpPage()),\n                        );\n                      },\n                      child: const Text(\n                        'Don\\'t have an account? Sign Up',\n                        style: TextStyle(\n                          decoration: TextDecoration.underline,\n                          fontWeight: FontWeight.bold,\n                        ),\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n}\n"
        }
    ]
}